---
title: "201230-TIL"

categories:
  - til
tags:
  - til
---
# TIL
 - state 및 props에 따른 상황 분기처리, 리액트 라이프 사이클 컨트롤

 - 코멘트, 검색창 및 외부접근 컨트롤

 - 전체 코드 리팩토링

 - cookie, session, token 복습 및 포스팅

 

# Thinking
 - 그래도 프로젝트 시작 9일만에 설계부터 기능 구현까지 다 끝냈다. 이제 코드 리팩토링이랑 CSS, 배포까지 하면 얼추 마무리가 될 듯하다. 빠듯하게 달려온 보람이 있다. 밀렸던 인증파트 복습과 블로그 포스팅까지 마쳤다.

 - 초기 스키마 및 API 작성 작업은 매우매우 중요하다. 코드를 작성하다보니 쓸데없이 오가는 데이터가 있는 반면, 필요한 데이터가 없을 때도 있고, 엔드포인트와 메서드가 비효율적으로 구성된 경우도 많았다. 이미 API를 백엔드와 정한 상태에서 중간에 API 틀을 바꾸는 것은 힘들기에, 꼭 필요한 경우가 아니라면 API 맞게 비효율적으로 짤 수밖에 없다. 

 - 단순 API 문제가 아니어도 state나 메서드 관리 측면에서도 전체 틀을 완벽하게 짜지 않은 상태에서 코딩해 내려가면 비효율적이고 복잡한 코드가 완성되기 마련이다.

 - 어제 공부했던 라이프 사이클 기반으로 state 및 props 업데이트에 따라 특정한 JS로직 처리를 구현시켜냈다. 하지만 예상치 못하게 예상했던 사이클 외에 이전에 작성했던 로직이 적상적으로 작동하지 않게되어버렸다. 범인은 shouldComponentUpdate 였다. shouldComponentUpdate를 쓴다면 해당 메서드에 모든 상황 조건을 작성해주는 것을 잊지 말자.

 - comment 메서드 몇개가 분리되어 있어서 container 안에 넣어주는 작업을 처리했다. 되도록이면 모든 state와 메서드는 container 안에서만 작성하도록 해야한다. 하지만 이럴 경우 너무나 많은 state와 props를 하위 컴포넌트로 뿌려주는 작업을 해야한다. 이는 오히려 코드의 가독성을 떨어뜨릴 수 있기에, 해당 양이 많아지면 별도로 container를 분리하는게 좋을 것 같다.

 - db와 연동된 state는 왠만해서 response 값으로 업데이트 하는 것이 좋다. db 등록이 확실하게 끝난 뒤(서버로부터 답변을 받은 뒤)에 state 갱신을 해야하며, 다른 값이나 형식, 데이터 타입 등으로 db와 다른 정보로 갱신될 수도 있으니 respose값으로 갱신해보자. 하지만 response를 안받거나 굳이 중요한 데이터나 db데이터가 아니라면 간단하게 ajax로 구현해보자.

 - 부모에서 state, props를 받는다면 반드시 그 부모를 지나서 자식이 호출되고 렌더되어야 한다.(redux없이) 예를 들어 home component에서 특정 state를 props로 뿌려서 특정 페이지나 컴포넌트가 랜더링 되었다면 반드시 home component를 지나야(마운트되야) 받을 수 있다. 즉, 특이한 순서 접근이나 url로 접근할 경우 이러한 해당 props를 못받기에 redux나 setstorage등에서 상태를 관리해줘야한다.